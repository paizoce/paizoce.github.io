---
import BaseLayout from "../../layouts/BaseLayout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
---

<BaseLayout title="Paizo | Register A Chapter">
  <Header />

  <section class="membership-header" style="margin-top: 80px;">
    <h1 class="membership-title">Register A Chapter</h1>
    <p><b>Start a Chapter at Your School!</b></p>
  </section>

  <section
    style="padding: 3rem 1rem; max-width: 900px; margin: auto; text-align: center;"
  >
    <h2
      style="color: var(--accent-color); font-size: 2.5rem; margin-bottom: 1rem; font-weight: bold;"
    >
      Expand Paizo to Your School
    </h2>
    <p style="font-size: 1.2rem; color: #fff; line-height: 1.6;">
      Are you passionate about music and want to bring the Paizo Chamber
      Ensemble to your school? Starting a new chapter is a great way to connect
      with fellow musicians and share your love of chamber music with your
      community.
    </p>
    <p
      style="font-size: 1.2rem; color: #fff; line-height: 1.6; margin-top: 1rem;"
    >
      We provide support, resources, and guidance to help you establish and grow
      your chapter.
    </p>

    <section
      style="background-color: #1a1a1a; padding: 4rem 2rem; text-align: center;"
    >
      <h2
        style="color: var(--accent-color); font-size: 2.5rem; margin-bottom: 2rem; font-weight: bold;"
      >
        Requirements
      </h2>
      <div
        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; max-width: 1000px; margin: auto;"
      >
        <div
          style="background-color: #222; border-radius: 10px; padding: 1.5rem; box-shadow: 0 0 10px rgba(0,0,0,0.08);"
        >
          <h3
            style="color: var(--accent-color); margin-bottom: 1rem; font-weight: bold;"
          >
            Minimum Members
          </h3>
          <p style="font-size: 1rem; color: #fff; line-height: 1.6;">
            At least 5 committed student musicians to start a chapter
          </p>
        </div>

        <div
          style="background-color: #222; border-radius: 10px; padding: 1.5rem; box-shadow: 0 0 10px rgba(0,0,0,0.08);"
        >
          <h3
            style="color: var(--accent-color); margin-bottom: 1rem; font-weight: bold;"
          >
            Faculty Advisor
          </h3>
          <p style="font-size: 1rem; color: #fff; line-height: 1.6;">
            A music teacher or faculty member to serve as advisor
          </p>
        </div>

        <div
          style="background-color: #222; border-radius: 10px; padding: 1.5rem; box-shadow: 0 0 10px rgba(0,0,0,0.08);"
        >
          <h3
            style="color: var(--accent-color); margin-bottom: 1rem; font-weight: bold;"
          >
            Practice Space
          </h3>
          <p style="font-size: 1rem; color: #fff; line-height: 1.6;">
            Access to a space for regular rehearsals and meetings
          </p>
        </div>
      </div>
    </section>
  </section>

  <section class="membership-form-section">
    <div class="form-container">
      <div class="form-header">
        <h2>Register a Chapter</h2>
        <p>Fill out the form below to start a Paizo chapter at your school.</p>
      </div>

      <form id="chapterForm" class="membership-form">
        <div class="form-row">
          <div class="form-group">
            <label for="ch-head-first">Chapter Head First Name</label>
            <input
              id="ch-head-first"
              name="chapterHeadFirstName"
              type="text"
              placeholder="First name"
              required
            />
          </div>
          <div class="form-group">
            <label for="ch-head-last">Chapter Head Last Name</label>
            <input
              id="ch-head-last"
              name="chapterHeadLastName"
              type="text"
              placeholder="Last name"
              required
            />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="ch-head-email">Chapter Head Email</label>
            <input
              id="ch-head-email"
              name="chapterHeadEmail"
              type="email"
              placeholder="you@example.com"
              required
            />
          </div>
          <div class="form-group">
            <label for="ch-school">School</label>
            <input
              id="ch-school"
              name="school"
              type="text"
              placeholder="School name"
              required
            />
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="ch-grade">Grade</label>
            <input
              id="ch-grade"
              name="grade"
              type="text"
              placeholder="e.g., 11th"
            />
          </div>
          <div class="form-group">
            <label for="ch-members"
              >Number of Founding Members (excluding chapter head)</label
            >
            <input
              id="ch-members"
              name="foundingMembers"
              type="number"
              min="0"
              placeholder="e.g., 5"
            />
          </div>
        </div>
        <div class="form-group full-width">
          <label for="ch-why">Why do you want to start a chapter?</label>
          <textarea
            id="ch-why"
            name="why"
            placeholder="Tell us why you want to start a chapter"
            required></textarea>
        </div>
        <div class="form-group full-width">
          <label for="ch-notes">Additional Notes/Inquiries</label>
          <textarea
            id="ch-notes"
            name="notes"
            placeholder="Anything else you'd like us to know?"></textarea>
        </div>
        <div class="actions">
          <button type="submit" class="submit"
            >Submit Chapter Registration</button
          >
        </div>
      </form>
    </div>
  </section>

  <Footer />
</BaseLayout>

<style>
  .membership-form-section {
    background: linear-gradient(135deg, var(--footer-bg) 0%, #1a1a1a 100%);
    padding: 4rem 2rem;
    color: white;
    min-height: 100vh;
  }

  .form-container {
    max-width: 800px;
    margin: 0 auto;
  }

  .form-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .form-header h2 {
    color: var(--accent-color);
    font-size: 2.5rem;
    margin-bottom: 1rem;
    font-weight: 700;
  }

  .form-header p {
    font-size: 1.1rem;
    opacity: 0.8;
    max-width: 600px;
    margin: 0 auto;
  }

  .membership-form {
    background: var(--card-bg);
    border-radius: 20px;
    padding: 3rem;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(33, 226, 210, 0.1);
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;
    margin-bottom: 1.5rem;
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-group.full-width {
    grid-column: 1 / -1;
  }

  .form-group label {
    color: white;
    font-weight: 600;
    margin-bottom: 0.5rem;
    font-size: 0.95rem;
  }

  .form-group input,
  .form-group textarea {
    background: rgba(255, 255, 255, 0.05);
    border: 2px solid rgba(255, 255, 255, 0.1);
    border-radius: 12px;
    padding: 1rem 1.2rem;
    color: white;
    font-size: 1rem;
    transition: all 0.3s ease;
    backdrop-filter: blur(10px);
  }

  .form-group input:focus,
  .form-group textarea:focus {
    outline: none;
    border-color: var(--accent-color);
    background: rgba(255, 255, 255, 0.08);
    box-shadow: 0 0 0 3px rgba(33, 226, 210, 0.1);
    transform: translateY(-2px);
  }

  .form-group input::placeholder,
  .form-group textarea::placeholder {
    color: rgba(255, 255, 255, 0.5);
  }

  .form-group textarea {
    resize: vertical;
    min-height: 120px;
    font-family: inherit;
  }

  .actions {
    text-align: center;
    margin-top: 2rem;
  }

  .submit {
    background: linear-gradient(135deg, var(--accent-color) 0%, #17c5b5 100%);
    color: #000;
    padding: 1rem 2.5rem;
    border-radius: 50px;
    border: none;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    text-transform: uppercase;
    letter-spacing: 1px;
    box-shadow: 0 4px 15px rgba(33, 226, 210, 0.3);
  }

  .submit:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(33, 226, 210, 0.4);
    background: linear-gradient(135deg, #17c5b5 0%, var(--accent-color) 100%);
  }

  .submit:active {
    transform: translateY(0);
  }

  @media screen and (max-width: 768px) {
    .membership-form-section {
      padding: 2rem 1rem;
    }

    .membership-form {
      padding: 2rem;
    }

    .form-header h2 {
      font-size: 2rem;
    }

    .form-row {
      grid-template-columns: 1fr;
      gap: 1rem;
    }
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("chapterForm") as HTMLFormElement;
    if (!form) return;

    function encode(text: string | null | undefined): string {
      return encodeURIComponent(text || "");
    }

    form.addEventListener("submit", function (e) {
      e.preventDefault();
      const first = (
        document.getElementById("ch-head-first") as HTMLInputElement
      )?.value?.trim();
      const last = (
        document.getElementById("ch-head-last") as HTMLInputElement
      )?.value?.trim();
      const email = (
        document.getElementById("ch-head-email") as HTMLInputElement
      )?.value?.trim();
      const school = (
        document.getElementById("ch-school") as HTMLInputElement
      )?.value?.trim();
      const grade = (
        document.getElementById("ch-grade") as HTMLInputElement
      )?.value?.trim();
      const members = (
        document.getElementById("ch-members") as HTMLInputElement
      )?.value?.trim();
      const why = (
        document.getElementById("ch-why") as HTMLTextAreaElement
      )?.value?.trim();
      const notes = (
        document.getElementById("ch-notes") as HTMLTextAreaElement
      )?.value?.trim();

      if (!first || !last || !email || !school || !why) {
        alert("Please fill out all required fields.");
        return;
      }

      const to = "paizochamberensemble@gmail.com";
      const subject = encode(
        `Chapter registration: ${first} ${last} - ${school}`
      );
      let body = "";
      body += `Chapter Head First Name: ${first}%0D%0A`;
      body += `Chapter Head Last Name: ${last}%0D%0A`;
      body += `Chapter Head Email: ${email}%0D%0A`;
      body += `School: ${school}%0D%0A`;
      if (grade) body += `Grade: ${grade}%0D%0A`;
      if (members) body += `Number of Founding Members: ${members}%0D%0A`;
      body += `%0D%0A`;
      body += `Why do you want to start a chapter?%0D%0A${encode(why)}%0D%0A`;
      if (notes)
        body += `%0D%0AAdditional Notes/Inquiries:%0D%0A${encode(notes)}%0D%0A`;
      const mailto = `mailto:${to}?subject=${subject}&body=${body}`;
      window.location.href = mailto;
    });
  });
</script>
